"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof")),_state=_interopRequireDefault(require("./state")),_symbols=require("./utils/symbols");function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(b,!0).forEach(function(c){(0,_defineProperty2["default"])(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function States(){this[_symbols.symStatesRegisters]=new Map,this[_symbols.symStatesListener]=function(){}}States.prototype.init=function(a){var b=this,c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if("object"!==(0,_typeof2["default"])(a)||Array.isArray(a))throw new Error("States require a object");var d=function(d){var e=new _state["default"](_objectSpread({typeValue:"any",history:!1,deep:2,warn:!0},c[d],{key:d,val:a[d]}));e.onChange=function(a){b[_symbols.symStatesListener](d,a)},b[_symbols.symStatesRegisters].set(d,e)};for(var e in a)d(e)},Object.defineProperty(States.prototype,"size",{get:function get(){return this[_symbols.symStatesRegisters].size},enumerable:!0,configurable:!1}),Object.defineProperty(States.prototype,"onListen",{set:function set(a){if("function"!=typeof a)throw new Error("onListen receive a Function");this[_symbols.symStatesListener]=a},enumerable:!0,configurable:!1}),States.prototype.values=function(){var a={},b=!0,c=!1,d=void 0;try{for(var e,f=this[_symbols.symStatesRegisters].entries()[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=(0,_slicedToArray2["default"])(e.value,2),h=g[0],i=g[1];a[h]=i.val}}catch(a){c=!0,d=a}finally{try{b||null==f["return"]||f["return"]()}finally{if(c)throw d}}return a},States.prototype.get=function(){var a={},b=!0,c=!1,d=void 0;try{for(var e,f=this[_symbols.symStatesRegisters].entries()[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=(0,_slicedToArray2["default"])(e.value,2),h=g[0],i=g[1];a[h]=i}}catch(a){c=!0,d=a}finally{try{b||null==f["return"]||f["return"]()}finally{if(c)throw d}}return a},States.prototype.toMethod=function(){var a={},b=!0,c=!1,d=void 0;try{for(var e,f=this[_symbols.symStatesRegisters].entries()[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=(0,_slicedToArray2["default"])(e.value,2),h=g[0],i=g[1];a[h]=i.change}}catch(a){c=!0,d=a}finally{try{b||null==f["return"]||f["return"]()}finally{if(c)throw d}}return a};var _default=States;exports["default"]=_default;