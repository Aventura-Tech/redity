"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=Dispatcher;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof")),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_exceptions=require("./utils/exceptions"),_action=_interopRequireDefault(require("./action")),_symbols=require("./utils/symbols");function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(b,!0).forEach(function(c){(0,_defineProperty2["default"])(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function Dispatcher(){var a=new Map,b=function(){var a=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function a(){return _regenerator["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop();}},a)}));return function(){return a.apply(this,arguments)}}();Object.defineProperties(this,{onListen:{set:function set(a){if("function"!=typeof a)throw(0,_exceptions.IsNotFunction)("On property");b=a},enumerable:!0,configurable:!1},size:{get:function get(){return a.size},enumerable:!0,configurable:!1}}),this.init=function(c){if("object"!==(0,_typeof2["default"])(c)||Array.isArray(c))throw(0,_exceptions.IsNotObject)("Dispatcher parameter");var d={};for(var k in c){var l=new _action["default"](k,c[k]);d[k]=l[_symbols.symActionLoading],a.set(k,l)}var e=!0,f=!1,g=void 0;try{for(var h,i=function(){var a=(0,_slicedToArray2["default"])(h.value,2),c=a[0],e=a[1];e.onListen=function(a,e){b(a,e,_objectSpread({},d,(0,_defineProperty2["default"])({},c,function(){})))}},j=a.entries()[Symbol.iterator]();!(e=(h=j.next()).done);e=!0)i()}catch(a){f=!0,g=a}finally{try{e||null==j["return"]||j["return"]()}finally{if(f)throw g}}},this.get=function(b){var c=a.get(b);return c||!1},this.toMethod=function(){var b={},c=!0,d=!1,e=void 0;try{for(var f,g=a.entries()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=(0,_slicedToArray2["default"])(f.value,2),i=h[0],j=h[1];b[i]=j.dispatch}}catch(a){d=!0,e=a}finally{try{c||null==g["return"]||g["return"]()}finally{if(d)throw e}}return b}}