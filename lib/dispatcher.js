"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=Dispatcher;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof")),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_exceptions=require("./utils/exceptions");function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(b,!0).forEach(function(c){(0,_defineProperty2["default"])(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function Dispatcher(){var a=new Map,b=function(){var a=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function a(){return _regenerator["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop();}},a)}));return function(){return a.apply(this,arguments)}}();Object.defineProperties(this,{onListen:{set:function set(a){if("function"!=typeof a)throw(0,_exceptions.IsNotFunction)("On property");b=a},enumerable:!0,configurable:!1},size:{get:function get(){return a.size},enumerable:!0,configurable:!1}}),this.init=function(c){if("object"!==(0,_typeof2["default"])(c)||Array.isArray(c))throw(0,_exceptions.IsNotObject)("Dispatcher parameter");var d=function(d){var e={};for(var g in c)e[g]=!1;var f=function(){var a=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function a(f){var g;return _regenerator["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e[d]){a.next=2;break}return a.abrupt("return",!1);case 2:return e[d]=function(){},g=Object.freeze({key:d,description:c[d],done:function done(){e[d]=!1}}),a.next=6,b(f,g,_objectSpread({},e));case 6:return e[d]=!1,a.abrupt("return",!0);case 8:case"end":return a.stop();}},a)}));return function(){return a.apply(this,arguments)}}();a.set(d,f)};for(var e in c)d(e)},this.toMethod=function(){var b={},c=!0,d=!1,e=void 0;try{for(var f,g=a.entries()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=(0,_slicedToArray2["default"])(f.value,2),i=h[0],j=h[1];b[i]=j}}catch(a){d=!0,e=a}finally{try{c||null==g["return"]||g["return"]()}finally{if(d)throw e}}return b}}